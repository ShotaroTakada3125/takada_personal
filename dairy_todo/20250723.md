## todo
- テストデータ
    - 一から始める
    - シーケンスで実行する
- 目標シート
- CSVサニタイズph2
    - 動作確認
    - テスト観点だし
    - UT仕様書作成
    - UT打鍵
    - レビュー依頼
    - PR提出


### 進捗
10~12 テストデータ

### 話し合い
- SMBC ph2の開発は金曜午前まで
- 

### CSVサニタイズ
- テスト観点
- [サニタイズ処理]
    - null:null
    - 空文字列(""): ""
    - 通常文字列("abc"): "'abc"
    - 数値文字列("123"): "'123"
    - 数式開始文字("=SUM(A1)", "+100"): "'=SUM(A1)"、"'+100"
    - 既に'で始まる文字列("'test")入力: ''test
- 改修内容
    - ヘッダー行とデータ行の両方に、[サニタイズ処理]を適用

- 対応ファイル：CsvDownloadService.outputCsvFile
    - 対象API
        /api/v1/user/export：ユーザ情報一覧
        /api/v1/nft/export：画像登録一覧
        /api/v1/nft/exchange/history/export：交換履歴一覧

    - 改修内容
        - ヘッダー行とデータ行の両方に、[サニタイズ処理]を適用

    - テスト観点
        - CSVファイルが出力される
        - ヘッダー行の各項目に正しくシングルクォート'が付与されている
        - データ行の各セルが、[サニタイズ処理]のルールに従って正しくサニタイズされている
        - [サニタイズ処理]の前後で、ヘッダー行とデータ行の各セルがシングルクォートを除いて一致している

- 対応ファイル：UserSelfNftService.addCsv
    - 対象API
        /api/v1/nft/apply/download：Myミャクーン申請一覧
        /api/v1/nft/apply/download/{approvalId}：審査結果アップロード（ダウンロード押下）

    - テスト観点
        - ダウンロードされるZIPファイルが壊れておらず、CSVファイルが含まれている
        - ヘッダー行の各項目に正しくシングルクォート'が付与されている
        - データ行の各セルが、[サニタイズ処理]のルールに従って正しくサニタイズされている
        - [サニタイズ処理]の前後で、ヘッダー行とデータ行の各セルがシングルクォートを除いて一致している

- 対応ファイル：UserActivityReportExportService.putFile
    - 対象API
        [POST] /api/v1/user/report/retry：日時ユーザ利用データ一覧（リトライ押下時）
        [POST] /api/v1/user/report/input-stream：日時ユーザ利用データ一覧

    - テスト観点
        - [サニタイズ処理]されたCSVファイルが、正しいS3のパス（static.stg.expo2025-dwnft.jp/report/）にアップロードされている
        - CSVファイルがダウンロードされる
        - ヘッダー行の各項目に正しくシングルクォート'が付与されている
        - データ行の各セルが、[サニタイズ処理]のルールに従って正しくサニタイズされている
        - [サニタイズ処理]の前後で、ヘッダー行とデータ行の各セルがシングルクォートを除いて一致している

- 対応ファイル：UserSelfNftApprovalService.checkline
    - 対象API
        [POST]/api/v1/nft/approval/upload/check/{approvalId}：審査結果アップロード（アップロード押下）

    - 改修内容
        - [サニタイズ処理]されたCSVデータをアップロード時に、シングルクォートを除いてデータを受け取るように変更

    - テスト観点
        - 審査結果のカラムに"OK"と入力してアップロードし、確認画面でシングルクォートが外れている
        - 審査結果のカラムに"'OK"と入力してアップロードし、確認画面でシングルクォートが外れている
        - CSVファイルの各項目のシングルクォートを外してアップロードし、エラーなく読み込みができる
        - 審査結果のカラムが空のCSVをアップロードし、必須項目エラーが発生する
        - 審査結果カラムに"OK", "NG"以外の値（例: "HOGE"）を含むCSVをアップロードし、OK/NG指定エラーが発生する
        - データ行に空の行を追加し、エラーが発生し読み込みがされない