# adamas MTGメモ

日時:2025/11/17 14:00~
- データ分析基盤側の試験に関するテーブル挿入
    - 今日明日はテーブルへの追加を0にする必要がある
    - であれば今日明日はJMeterの実行ができない
    - todo：下に示すやつは今日中は対応が必要
        - エビデンスの取得・整理
        - JMeter実行準備


- データ分析基盤の優先度が高い
    - エビデンス
        - エラーが出始める前後の枯渇、エラーがないことはJMeterの結果
        - 100に張り付いてない負荷、アプリで
        - 原因でエラー, 
        期限叩けないのであれば
        エビデンスをまとめる
        アプリ側のエラーログを見ながら、エラーの仮説を立てる
        期限は今週中に再打鍵までできたら良い
        原因の特定は二人に出してもらいたいのではなく、簡単な仮説
            DBの負荷が上がり、DBの負荷が上がっているので調査を依頼するバトンを渡す調査まで
        段階を細かくして週の後半
        300が限界っぽい


- コネクションプール数
    - 前回実行した際はmax_poolsizeが400ではなく10だったっぽい
    - RDSのCPU使用率はmaximam_poolsizeには関係がなさそう
- 六本木さん状況
    - ソースを追っている
    - インデックスが貼られてないクエリが存在した
    - 11/16 実行時350RPS以上だとエラーが発生した理由はmaximau PoolSizeが低く、アプリ側で止まってしまっていたのではないか
- 口座開設
    - 1s100件はプール数が1600ほど必要になってしまうので、現在のプール数200の設定ではアプリ側で止まってしまう
    - 10s100件ならプール数の必要数が160ほどになり、プール数は問題にならないと考えられる。
    - DBのクエリ実行が遅くなっている原因
        - 直列にループしている部分?
        - シンクロナイズドの部分?
- 実行結果
    - 口座開設：メールアドレス登録のみ
        - 10s100件でもエラーが発生した。
        - Response timeも件数とともに増加しており、局所的な負荷に耐えられていないことを示している。
        - 上記のように、pool sizeには問題がないことを確認しており、
